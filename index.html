<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ææ€–ç—‡å¯¾å¿œæ˜ ç”»æƒ…å ±ã‚µã‚¤ãƒˆ - PhobiaFree Cinema</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans JP', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        h1 {
            color: #4a5568;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            color: #718096;
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .search-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .search-form {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .search-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            min-width: 200px;
        }
        
        .search-btn {
            padding: 15px 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
        }
        
        .phobia-filters {
            margin-top: 20px;
        }
        
        .phobia-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .phobia-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f7fafc;
            border-radius: 8px;
            transition: background 0.2s;
        }
        
        .phobia-item:hover {
            background: #edf2f7;
        }
        
        .phobia-item input {
            margin-right: 10px;
        }
        
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .movie-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .movie-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .movie-poster {
            width: 100%;
            height: 400px;
            object-fit: cover;
            background: #e2e8f0;
        }
        
        .movie-info {
            padding: 20px;
        }
        
        .movie-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .movie-year {
            color: #718096;
            margin-bottom: 15px;
        }
        
        .phobia-warnings {
            margin-top: 15px;
        }
        
        .warning-tag {
            display: inline-block;
            background: #fed7d7;
            color: #c53030;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin: 2px;
            font-weight: bold;
        }
        
        .add-movie-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #4a5568;
        }
        
        .form-input, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .toggle-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 20px;
            transition: background 0.2s;
        }
        
        .toggle-btn:hover {
            background: #3182ce;
        }
        
        .add-form {
            display: none;
        }
        
        .add-form.active {
            display: block;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: #718096;
            font-size: 1.2em;
        }
        
        .error-message {
            background: #fed7d7;
            color: #c53030;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        /* Google AdSense ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ */
        .ad-space {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 30px 0;
            color: #718096;
        }
        
        .no-results {
            text-align: center;
            padding: 50px;
            color: #718096;
        }
        
        @media (max-width: 768px) {
            .search-form {
                flex-direction: column;
            }
            
            .phobia-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¬ PhobiaFree Cinema</h1>
            <p class="subtitle">ææ€–ç—‡ã®æ–¹ãŒå®‰å¿ƒã—ã¦æ˜ ç”»ã‚’æ¥½ã—ã‚ã‚‹æƒ…å ±ã‚µã‚¤ãƒˆ</p>
            <p>æ˜ ç”»ã®ææ€–è¦ç´ ã‚’äº‹å‰ã«ãƒã‚§ãƒƒã‚¯ã—ã¦ã€å®‰å¿ƒã—ã¦æ˜ ç”»é‘‘è³ã‚’æ¥½ã—ã¿ã¾ã—ã‚‡ã†</p>
        </header>

        <!-- Google AdSense ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ -->
        <div class="ad-space">
            <p>Google AdSense åºƒå‘Šã‚¹ãƒšãƒ¼ã‚¹</p>
            <small>å®Ÿè£…æ™‚ã«ã¯ã“ã“ã«AdSenseã‚³ãƒ¼ãƒ‰ã‚’é…ç½®</small>
        </div>

        <div class="search-section">
            <h2>ğŸ” æ˜ ç”»ã‚’æ¤œç´¢</h2>
            <div class="search-form">
                <input type="text" id="searchInput" class="search-input" placeholder="æ˜ ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
                <button onclick="searchMovies()" class="search-btn">æ¤œç´¢</button>
            </div>
            
            <div class="phobia-filters">
                <h3>ğŸ” æ¤œç´¢ã—ãŸã„ææ€–è¦ç´ ã‚’é¸æŠ</h3>
                <div class="phobia-grid" id="phobiaFilters">
                    <div class="phobia-item">
                        <input type="checkbox" id="heights" value="é«˜æ‰€">
                        <label for="heights">é«˜æ‰€ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="enclosed" value="é–‰æ‰€">
                        <label for="enclosed">é–‰æ‰€ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="darkness" value="æš—æ‰€">
                        <label for="darkness">æš—æ‰€ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="spiders" value="èœ˜è››">
                        <label for="spiders">èœ˜è››ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="butterflies" value="è¶">
                        <label for="butterflies">è¶ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="ants" value="èŸ»">
                        <label for="ants">èŸ»ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="insects" value="æ˜†è™«">
                        <label for="insects">æ˜†è™«ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="frogs" value="ã‚«ã‚¨ãƒ«">
                        <label for="frogs">ã‚«ã‚¨ãƒ«ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="snakes" value="ãƒ˜ãƒ“">
                        <label for="snakes">ãƒ˜ãƒ“ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="clusters" value="é›†åˆä½“">
                        <label for="clusters">é›†åˆä½“ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="blood" value="è¡€æ¶²æå†™">
                        <label for="blood">è¡€æ¶²æå†™ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="water" value="æ°´ãƒ»æººæ°´">
                        <label for="water">æ°´ãƒ»æººæ°´ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="thunder" value="é›·">
                        <label for="thunder">é›·ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="vomit" value="å˜”å">
                        <label for="vomit">å˜”åææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="needles" value="æ³¨å°„ãƒ»å…ˆç«¯">
                        <label for="needles">æ³¨å°„ãƒ»å…ˆç«¯ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="clowns" value="ãƒ”ã‚¨ãƒ­">
                        <label for="clowns">ãƒ”ã‚¨ãƒ­ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="ghosts" value="å¹½éœŠãƒ»è¶…å¸¸ç¾è±¡">
                        <label for="ghosts">å¹½éœŠãƒ»è¶…å¸¸ç¾è±¡ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="corpses" value="æ­»ä½“">
                        <label for="corpses">æ­»ä½“ææ€–ç—‡</label>
                    </div>
                    <div class="phobia-item">
                        <input type="checkbox" id="others" value="ãã®ä»–">
                        <label for="others">ãã®ä»–</label>
                    </div>
                </div>
            </div>
        </div>

        <div id="loadingDiv" class="loading" style="display: none;">
            ğŸ” æ˜ ç”»ã‚’æ¤œç´¢ä¸­...
        </div>

        <div id="errorDiv" class="error-message" style="display: none;"></div>

        <div id="moviesContainer" class="movies-grid"></div>

        <!-- Google AdSense ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ -->
        <div class="ad-space">
            <p>Google AdSense åºƒå‘Šã‚¹ãƒšãƒ¼ã‚¹</p>
            <small>å®Ÿè£…æ™‚ã«ã¯ã“ã“ã«AdSenseã‚³ãƒ¼ãƒ‰ã‚’é…ç½®</small>
        </div>

        <div class="add-movie-section">
            <button onclick="toggleAddForm()" class="toggle-btn">ğŸ“ æ–°ã—ã„æ˜ ç”»æƒ…å ±ã‚’è¿½åŠ </button>
            
            <div id="addMovieForm" class="add-form">
                <h3>æ˜ ç”»ã®ææ€–è¦ç´ æƒ…å ±ã‚’è¿½åŠ </h3>
                <p>ã‚µã‚¤ãƒˆã«æ²è¼‰ã•ã‚Œã¦ã„ãªã„æ˜ ç”»ã®ææ€–è¦ç´ æƒ…å ±ã‚’æŠ•ç¨¿ã§ãã¾ã™ã€‚</p>
                
                <form onsubmit="submitMovieInfo(event)">
                    <div class="form-group">
                        <label class="form-label">æ˜ ç”»ã‚¿ã‚¤ãƒˆãƒ« *</label>
                        <input type="text" id="movieTitle" class="form-input" required placeholder="ä¾‹: ã‚¸ãƒ§ãƒ¼ã‚º">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">åˆ¶ä½œå¹´</label>
                        <input type="number" id="movieYear" class="form-input" min="1900" max="2030" placeholder="ä¾‹: 1975">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ç›£ç£</label>
                        <input type="text" id="movieDirector" class="form-input" placeholder="ä¾‹: ã‚¹ãƒ†ã‚£ãƒ¼ãƒ–ãƒ³ãƒ»ã‚¹ãƒ”ãƒ«ãƒãƒ¼ã‚°">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ææ€–è¦ç´  *</label>
                        <div class="phobia-grid">
                            <div class="phobia-item">
                                <input type="checkbox" id="add_heights" name="phobias" value="é«˜æ‰€">
                                <label for="add_heights">é«˜æ‰€ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_enclosed" name="phobias" value="é–‰æ‰€">
                                <label for="add_enclosed">é–‰æ‰€ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_darkness" name="phobias" value="æš—æ‰€">
                                <label for="add_darkness">æš—æ‰€ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_spiders" name="phobias" value="èœ˜è››">
                                <label for="add_spiders">èœ˜è››ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_butterflies" name="phobias" value="è¶">
                                <label for="add_butterflies">è¶ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_ants" name="phobias" value="èŸ»">
                                <label for="add_ants">èŸ»ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_insects" name="phobias" value="æ˜†è™«">
                                <label for="add_insects">æ˜†è™«ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_frogs" name="phobias" value="ã‚«ã‚¨ãƒ«">
                                <label for="add_frogs">ã‚«ã‚¨ãƒ«ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_snakes" name="phobias" value="ãƒ˜ãƒ“">
                                <label for="add_snakes">ãƒ˜ãƒ“ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_clusters" name="phobias" value="é›†åˆä½“">
                                <label for="add_clusters">é›†åˆä½“ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_blood" name="phobias" value="è¡€æ¶²æå†™">
                                <label for="add_blood">è¡€æ¶²æå†™ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_water" name="phobias" value="æ°´ãƒ»æººæ°´">
                                <label for="add_water">æ°´ãƒ»æººæ°´ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_thunder" name="phobias" value="é›·">
                                <label for="add_thunder">é›·ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_vomit" name="phobias" value="å˜”å">
                                <label for="add_vomit">å˜”åææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_needles" name="phobias" value="æ³¨å°„ãƒ»å…ˆç«¯">
                                <label for="add_needles">æ³¨å°„ãƒ»å…ˆç«¯ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_clowns" name="phobias" value="ãƒ”ã‚¨ãƒ­">
                                <label for="add_clowns">ãƒ”ã‚¨ãƒ­ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_ghosts" name="phobias" value="å¹½éœŠãƒ»è¶…å¸¸ç¾è±¡">
                                <label for="add_ghosts">å¹½éœŠãƒ»è¶…å¸¸ç¾è±¡ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_corpses" name="phobias" value="æ­»ä½“">
                                <label for="add_corpses">æ­»ä½“ææ€–ç—‡</label>
                            </div>
                            <div class="phobia-item">
                                <input type="checkbox" id="add_others" name="phobias" value="ãã®ä»–">
                                <label for="add_others">ãã®ä»–</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">è©³ç´°èª¬æ˜</label>
                        <textarea id="movieDescription" class="form-textarea" placeholder="ææ€–è¦ç´ ã®è©³ç´°ãªèª¬æ˜ã‚„å‡ºç¾ã™ã‚‹ã‚·ãƒ¼ãƒ³ã«ã¤ã„ã¦è¨˜è¼‰ã—ã¦ãã ã•ã„"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">æŠ•ç¨¿è€…åï¼ˆä»»æ„ï¼‰</label>
                        <input type="text" id="submitterName" class="form-input" placeholder="åŒ¿å">
                    </div>
                    
                    <button type="submit" class="search-btn">æŠ•ç¨¿ã™ã‚‹</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = '9c5b6fe18f36543b858effdaf87e44e0';
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/w500';
        
        // ã‚µãƒ³ãƒ—ãƒ«ã®ææ€–ç—‡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨é€£æºï¼‰
        const phobiaDatabase = {
            // ãƒ›ãƒ©ãƒ¼æ˜ ç”»ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
            'ã‚¸ãƒ§ãƒ¼ã‚º': {
                phobias: ['æ°´ãƒ»æººæ°´', 'è¡€æ¶²æå†™'],
                description: 'ã‚µãƒ¡ã«ã‚ˆã‚‹æ”»æ’ƒã‚·ãƒ¼ãƒ³ãŒå¤šæ•°ã€‚æ°´ä¸­ã‚„æµ·ã§ã®ã‚·ãƒ¼ãƒ³ãŒé »ç¹ã«ç™»å ´ã€‚'
            },
            'ã‚¢ãƒ©ã‚¯ãƒãƒ•ã‚©ãƒ“ã‚¢': {
                phobias: ['èœ˜è››', 'æ˜†è™«'],
                description: 'ã‚¿ã‚¤ãƒˆãƒ«é€šã‚Šèœ˜è››ãŒä¸»è¦ãªææ€–è¦ç´ ã€‚å¤§é‡ã®èœ˜è››ãŒç™»å ´ã€‚'
            },
            'ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ»ã‚¹ãƒšãƒ¼ã‚¹': {
                phobias: ['é–‰æ‰€'],
                description: 'ç‹­ã„ç©ºé–“ã§ã®ææ€–ã‚’æã„ãŸä½œå“ã€‚'
            },
            'ã‚¨ã‚¯ã‚½ã‚·ã‚¹ãƒˆ': {
                phobias: ['å¹½éœŠãƒ»è¶…å¸¸ç¾è±¡', 'å˜”å'],
                description: 'æ‚ªé­”æ†‘ãã‚’æ‰±ã£ãŸè¶…å¸¸ç¾è±¡ãƒ›ãƒ©ãƒ¼ã€‚å˜”åã‚·ãƒ¼ãƒ³ã‚ã‚Šã€‚'
            },
            'ã‚¤ãƒƒãƒˆ': {
                phobias: ['ãƒ”ã‚¨ãƒ­'],
                description: 'ææ€–ã®ãƒ”ã‚¨ãƒ­ãŒä¸»è¦ãªç™»å ´äººç‰©ã€‚'
            }
        };

        // TMDB APIã‹ã‚‰æ˜ ç”»ã‚’æ¤œç´¢
        async function searchMovies() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) {
                showError('æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            showLoading(true);
            hideError();

            try {
                const response = await fetch(`${BASE_URL}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(query)}&language=ja-JP`);
                const data = await response.json();
                
                if (data.results && data.results.length > 0) {
                    displayMovies(data.results);
                } else {
                    showNoResults();
                }
            } catch (error) {
                console.error('æ¤œç´¢ã‚¨ãƒ©ãƒ¼:', error);
                showError('æ¤œç´¢ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚');
            } finally {
                showLoading(false);
            }
        }

        // æ˜ ç”»çµæœã‚’è¡¨ç¤º
        function displayMovies(movies) {
            const container = document.getElementById('moviesContainer');
            const selectedPhobias = getSelectedPhobias();
            
            const filteredMovies = movies.filter(movie => {
                const moviePhobias = getMoviePhobias(movie.title);
                // ææ€–è¦ç´ ãŒé¸æŠã•ã‚Œã¦ã„ãªã„å ´åˆã¯å…¨ã¦ã®æ˜ ç”»ã‚’è¡¨ç¤º
                if (selectedPhobias.length === 0) {
                    return true;
                }
                // é¸æŠã•ã‚ŒãŸææ€–è¦ç´ ã®ã„ãšã‚Œã‹ãŒæ˜ ç”»ã«å«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã«è¡¨ç¤º
                return hasSelectedPhobias(moviePhobias, selectedPhobias);
            });

            if (filteredMovies.length === 0) {
                if (selectedPhobias.length > 0) {
                    container.innerHTML = '<div class="no-results">é¸æŠã—ãŸææ€–è¦ç´ ã‚’å«ã‚€æ˜ ç”»ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</div>';
                } else {
                    container.innerHTML = '<div class="no-results">æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</div>';
                }
                return;
            }

            container.innerHTML = filteredMovies.map(movie => {
                const moviePhobias = getMoviePhobias(movie.title);
                const phobiaWarnings = moviePhobias.map(phobia => 
                    `<span class="warning-tag">${phobia}</span>`
                ).join('');

                const posterUrl = movie.poster_path 
                    ? `${IMAGE_BASE_URL}${movie.poster_path}` 
                    : 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="450" viewBox="0 0 300 450"><rect width="300" height="450" fill="%23e2e8f0"/><text x="150" y="225" text-anchor="middle" fill="%23718096" font-size="16">ãƒã‚¹ã‚¿ãƒ¼æœªç™»éŒ²</text></svg>';

                return `
                    <div class="movie-card">
                        <img src="${posterUrl}" alt="${movie.title}" class="movie-poster" onerror="this.src='data:image/svg+xml,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;300&quot; height=&quot;450&quot; viewBox=&quot;0 0 300 450&quot;><rect width=&quot;300&quot; height=&quot;450&quot; fill=&quot;%23e2e8f0&quot;/><text x=&quot;150&quot; y=&quot;225&quot; text-anchor=&quot;middle&quot; fill=&quot;%23718096&quot; font-size=&quot;16&quot;>ãƒã‚¹ã‚¿ãƒ¼æœªç™»éŒ²</text></svg>'">
                        <div class="movie-info">
                            <div class="movie-title">${movie.title}</div>
                            <div class="movie-year">${movie.release_date ? new Date(movie.release_date).getFullYear() : 'å¹´ä¸æ˜'}</div>
                            <div class="movie-overview">${movie.overview || 'æ¦‚è¦ãªã—'}</div>
                            ${phobiaWarnings ? `<div class="phobia-warnings"><h4>âš ï¸ ææ€–è¦ç´ :</h4>${phobiaWarnings}</div>` : '<div style="color: #48bb78; font-weight: bold;">âœ… ææ€–è¦ç´ æƒ…å ±ãªã—</div>'}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // é¸æŠã•ã‚ŒãŸææ€–ç—‡ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’å–å¾—
        function getSelectedPhobias() {
            const checkboxes = document.querySelectorAll('#phobiaFilters input[type="checkbox"]:checked');
            return Array.from(checkboxes).map(cb => cb.value);
        }

        // æ˜ ç”»ã®ææ€–ç—‡æƒ…å ±ã‚’å–å¾—
        function getMoviePhobias(title) {
            const movieData = phobiaDatabase[title];
            return movieData ? movieData.phobias : [];
        }

        // é¸æŠã•ã‚ŒãŸææ€–ç—‡ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        function hasSelectedPhobias(moviePhobias, selectedPhobias) {
            return moviePhobias.some(phobia => selectedPhobias.includes(phobia));
        }

        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºåˆ¶å¾¡
        function showLoading(show) {
            document.getElementById('loadingDiv').style.display = show ? 'block' : 'none';
        }

        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showError(message) {
            const errorDiv = document.getElementById('errorDiv');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        // ã‚¨ãƒ©ãƒ¼éè¡¨ç¤º
        function hideError() {
            document.getElementById('errorDiv').style.display = 'none';
        }

        // çµæœãªã—è¡¨ç¤º
        function showNoResults() {
            document.getElementById('moviesContainer').innerHTML = 
                '<div class="no-results">æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚åˆ¥ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§è©¦ã—ã¦ãã ã•ã„ã€‚</div>';
        }

        // æ˜ ç”»è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function toggleAddForm() {
            const form = document.getElementById('addMovieForm');
            form.classList.toggle('active');
        }

        // æ˜ ç”»æƒ…å ±æŠ•ç¨¿
        function submitMovieInfo(event) {
            event.preventDefault();
            
            const title = document.getElementById('movieTitle').value;
            const year = document.getElementById('movieYear').value;
            const director = document.getElementById('movieDirector').value;
            const description = document.getElementById('movieDescription').value;
            const submitter = document.getElementById('submitterName').value || 'åŒ¿å';
            
            const selectedPhobias = Array.from(document.querySelectorAll('input
