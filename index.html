<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ファビアチェック - 恐怖症対応映画紹介サイト</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1387560637754446"
         crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-link {
            padding: 10px 20px;
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .search-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            border-color: #667eea;
        }

        .search-btn {
            padding: 15px 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 10px 20px;
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            color: #333;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .tab-btn:hover {
            transform: translateY(-2px);
        }

        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .movie-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .movie-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
            background: linear-gradient(45deg, #ddd, #eee);
        }

        .movie-info {
            padding: 15px;
        }

        .movie-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .movie-year {
            color: #666;
            margin-bottom: 10px;
        }

        .phobia-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }

        .phobia-tag {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .more-btn {
            display: block;
            margin: 20px auto;
            padding: 15px 40px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .more-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .close {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #999;
        }

        .close:hover {
            color: #333;
        }

        .phobia-form {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 14px;
            outline: none;
        }

        .form-group input:focus, .form-group textarea:focus {
            border-color: #667eea;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
        }

        .submit-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .ad-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #667eea;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 18px;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .search-box {
                flex-direction: column;
            }

            .category-tabs {
                justify-content: center;
            }

            .movie-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-film"></i> ファビアチェック
                </div>
                <div class="nav-links">
                    <a href="#" class="nav-link" onclick="showModal('aboutModal')">サイト説明</a>
                    <a href="#" class="nav-link" onclick="showModal('disclaimerModal')">免責事項</a>
                    <a href="#" class="nav-link" onclick="showModal('addMovieModal')">映画情報追加</a>
                </div>
            </div>
        </header>

        <div class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" id="searchInput" placeholder="映画タイトルを入力してください...">
                <button class="search-btn" onclick="searchMovies()">
                    <i class="fas fa-search"></i> 検索
                </button>
            </div>
            
            <div class="category-tabs">
                <button class="tab-btn active" onclick="switchTab('popular')">話題の映画</button>
                <button class="tab-btn" onclick="switchTab('upcoming')">公開予定の映画</button>
                <button class="tab-btn" onclick="switchTab('now_playing')">上映中の映画</button>
                <button class="tab-btn" onclick="switchTab('top_rated')">評価の高い映画</button>
            </div>
        </div>

        <!-- Ad Container -->
        <div class="ad-container">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-1387560637754446"
                 data-ad-slot="1234567890"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>

        <div id="movieResults">
            <div class="loading">映画データを読み込み中...</div>
        </div>

        <button id="moreBtn" class="more-btn" onclick="loadMoreMovies()" style="display: none;">
            もっと見る
        </button>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('aboutModal')">&times;</span>
            <h2>ファビアチェックについて</h2>
            <p><strong>ファビオ（恐怖症）</strong>をお持ちの方が、安心して映画を楽しめるように作られたサイトです。</p>
            <p>このサイトでは、映画に含まれる恐怖要素を事前に確認することができます。各映画には、以下のような恐怖要素がタグ付けされています：</p>
            <ul style="margin: 15px 0; padding-left: 20px;">
                <li>高所恐怖症（高い場所のシーン）</li>
                <li>閉所恐怖症（狭い場所のシーン）</li>
                <li>暗所恐怖症（暗闇のシーン）</li>
                <li>昆虫恐怖症（虫類の登場）</li>
                <li>血液描写（出血シーン）</li>
                <li>その他多数の恐怖要素</li>
            </ul>
            <p>映画を選ぶ際の参考にしていただき、安心して映画鑑賞をお楽しみください。</p>
        </div>
    </div>

    <!-- Disclaimer Modal -->
    <div id="disclaimerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('disclaimerModal')">&times;</span>
            <h2>免責事項</h2>
            <p>当サイト「ファビアチェック」をご利用いただきありがとうございます。以下の免責事項をご確認ください。</p>
            
            <h3>情報の正確性について</h3>
            <p>当サイトに掲載されている映画の恐怖要素に関する情報は、ユーザーの皆様からの投稿および編集者による調査に基づいています。すべての情報の正確性や完全性を保証するものではありません。</p>
            
            <h3>個人差について</h3>
            <p>恐怖の感じ方には個人差があります。当サイトの情報は参考程度にとどめ、最終的な判断は各自で行ってください。</p>
            
            <h3>責任の制限</h3>
            <p>当サイトの情報を利用したことにより生じたいかなる損害についても、当サイトは責任を負いかねます。</p>
            
            <h3>情報の更新</h3>
            <p>映画情報は随時更新されますが、最新の情報を保証するものではありません。</p>
            
            <p>ご理解とご協力をお願いいたします。</p>
        </div>
    </div>

    <!-- Add Movie Modal -->
    <div id="addMovieModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addMovieModal')">&times;</span>
            <h2>映画情報の追加・修正</h2>
            <p>映画の恐怖要素情報を追加または修正できます。正確な情報の提供にご協力ください。</p>
            
            <form class="phobia-form" onsubmit="submitPhobiaInfo(event)">
                <div class="form-group">
                    <label for="movieTitle">映画タイトル</label>
                    <input type="text" id="movieTitle" required>
                </div>
                
                <div class="form-group">
                    <label for="movieYear">公開年</label>
                    <input type="number" id="movieYear" min="1900" max="2030">
                </div>
                
                <div class="form-group">
                    <label>恐怖要素（該当するものにチェック）</label>
                    <div class="checkbox-grid">
                        <div class="checkbox-item">
                            <input type="checkbox" id="heights" value="高所">
                            <label for="heights">高所</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="enclosed" value="閉所">
                            <label for="enclosed">閉所</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="darkness" value="暗所">
                            <label for="darkness">暗所</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="spider" value="蜘蛛">
                            <label for="spider">蜘蛛</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="butterfly" value="蝶">
                            <label for="butterfly">蝶</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ant" value="蟻">
                            <label for="ant">蟻</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="insects" value="昆虫">
                            <label for="insects">昆虫</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="frog" value="蛙">
                            <label for="frog">蛙</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="snake" value="ヘビ">
                            <label for="snake">ヘビ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cluster" value="集合体">
                            <label for="cluster">集合体</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="blood" value="血液描写">
                            <label for="blood">血液描写</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="water" value="水・溺水">
                            <label for="water">水・溺水</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="thunder" value="雷">
                            <label for="thunder">雷</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="vomit" value="嘔吐">
                            <label for="vomit">嘔吐</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="needle" value="注射・先端">
                            <label for="needle">注射・先端</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="clown" value="ピエロ">
                            <label for="clown">ピエロ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ghost" value="幽霊・超常現象">
                            <label for="ghost">幽霊・超常現象</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="sexual" value="性的シーン">
                            <label for="sexual">性的シーン</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="corpse" value="死体">
                            <label for="corpse">死体</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="other" value="その他">
                            <label for="other">その他</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="notes">補足情報</label>
                    <textarea id="notes" rows="3" placeholder="具体的なシーンの説明など..."></textarea>
                </div>
                
                <button type="submit" class="submit-btn">情報を送信</button>
            </form>
        </div>
    </div>

    <script>
        const API_KEY = '9c5b6fe18f36543b858effdaf87e44e0';
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/w500';

        let currentTab = 'popular';
        let currentPage = 1;
        let currentMovies = [];
        let allMovies = [];
        let isLoading = false;

        // Sample phobia data for movies
        const phobiaData = {};

        // Initialize the site
        document.addEventListener('DOMContentLoaded', function() {
            loadMovies('popular');
            initializeAds();
            generateSamplePhobiaData();
        });

        function initializeAds() {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
            } catch (e) {
                console.log('AdSense not loaded');
            }
        }

        function generateSamplePhobiaData() {
            // Generate sample phobia data for demonstration
            const phobiaTypes = ['高所', '閉所', '暗所', '蜘蛛', '蝶', '蟻', '昆虫', '蛙', 'ヘビ', '集合体', '血液描写', '水・溺水', '雷', '嘔吐', '注射・先端', 'ピエロ', '幽霊・超常現象', '性的シーン', '死体', 'その他'];
            
            // This would normally come from a database
            for (let i = 1; i <= 1000; i++) {
                const numPhobias = Math.floor(Math.random() * 5);
                const moviePhobias = [];
                for (let j = 0; j < numPhobias; j++) {
                    const randomPhobia = phobiaTypes[Math.floor(Math.random() * phobiaTypes.length)];
                    if (!moviePhobias.includes(randomPhobia)) {
                        moviePhobias.push(randomPhobia);
                    }
                }
                phobiaData[i] = moviePhobias;
            }
        }

        async function loadMovies(category) {
            isLoading = true;
            currentTab = category;
            currentPage = 1;
            
            try {
                const response = await fetch(`${BASE_URL}/movie/${category}?api_key=${API_KEY}&language=ja-JP&page=${currentPage}`);
                const data = await response.json();
                
                currentMovies = data.results || [];
                allMovies = [...currentMovies];
                
                displayMovies(currentMovies.slice(0, 8));
                
                if (currentMovies.length > 8) {
                    document.getElementById('moreBtn').style.display = 'block';
                } else {
                    document.getElementById('moreBtn').style.display = 'none';
                }
            } catch (error) {
                console.error('Error loading movies:', error);
                document.getElementById('movieResults').innerHTML = '<div class="no-results">映画データの読み込みに失敗しました。</div>';
            }
            
            isLoading = false;
        }

        async function loadMoreMovies() {
            if (isLoading) return;
            
            isLoading = true;
            currentPage++;
            
            try {
                const response = await fetch(`${BASE_URL}/movie/${currentTab}?api_key=${API_KEY}&language=ja-JP&page=${currentPage}`);
                const data = await response.json();
                
                if (data.results && data.results.length > 0) {
                    currentMovies = [...currentMovies, ...data.results];
                    allMovies = [...currentMovies];
                    
                    const startIndex = (currentPage - 1) * 20;
                    const endIndex = Math.min(startIndex + 8, currentMovies.length);
                    
                    displayMovies(currentMovies.slice(0, endIndex));
                    
                    if (endIndex >= currentMovies.length && currentPage * 20 >= data.total_results) {
                        document.getElementById('moreBtn').style.display = 'none';
                    }
                } else {
                    document.getElementById('moreBtn').style.display = 'none';
                }
            } catch (error) {
                console.error('Error loading more movies:', error);
            }
            
            isLoading = false;
        }

        async function searchMovies() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;
            
            isLoading = true;
            document.getElementById('movieResults').innerHTML = '<div class="loading">検索中...</div>';
            
            try {
                const response = await fetch(`${BASE_URL}/search/movie?api_key=${API_KEY}&language=ja-JP&query=${encodeURIComponent(query)}`);
                const data = await response.json();
                
                currentMovies = data.results || [];
                allMovies = [...currentMovies];
                
                if (currentMovies.length === 0) {
                    document.getElementById('movieResults').innerHTML = '<div class="no-results">検索結果が見つかりませんでした。</div>';
                    document.getElementById('moreBtn').style.display = 'none';
                } else {
                    displayMovies(currentMovies.slice(0, 8));
                    if (currentMovies.length > 8) {
                        document.getElementById('moreBtn').style.display = 'block';
                    } else {
                        document.getElementById('moreBtn').style.display = 'none';
                    }
                }
            } catch (error) {
                console.error('Error searching movies:', error);
                document.getElementById('movieResults').innerHTML = '<div class="no-results">検索に失敗しました。</div>';
            }
            
            isLoading = false;
        }

        function displayMovies(movies) {
            const container = document.getElementById('movieResults');
            const movieGrid = document.createElement('div');
            movieGrid.className = 'movie-grid';
            
            movies.forEach(movie => {
                const movieCard = createMovieCard(movie);
                movieGrid.appendChild(movieCard);
            });
            
            container.innerHTML = '';
            container.appendChild(movieGrid);
        }

        function createMovieCard(movie) {
            const card = document.createElement('div');
            card.className = 'movie-card';
            
            const posterUrl = movie.poster_path 
                ? `${IMAGE_BASE_URL}${movie.poster_path}`
                : 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjQ1MCIgdmlld0JveD0iMCAwIDMwMCA0NTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iNDUwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMjUgMTgwSDEwMFYyMDBIMTI1VjE4MFoiIGZpbGw9IiM5Q0EzQUYiLz4KPHA+';
            
            const releaseYear = movie.release_date ? new Date(movie.release_date).getFullYear() : '未定';
            const moviePhobias = phobiaData[movie.id] || [];
            
            card.innerHTML = `
                <img src="${posterUrl}" alt="${movie.title}" class="movie-poster" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjQ1MCIgdmlld0JveD0iMCAwIDMwMCA0NTAiIGZpbG
